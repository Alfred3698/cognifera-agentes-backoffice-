{"openapi":"3.0.0","info":{"title":"backoffice-service service","description":"The backoffice-service service API description","version":"1.0","contact":{}},"tags":[{"name":"backoffice-service","description":""}],"servers":[],"components":{"schemas":{"ChatRequest":{"type":"object","properties":{"idConversacion":{"type":"string","description":"ID de la conversación","example":"234234"},"pushName":{"type":"string","description":"Nombre del usuario","example":"Gibran Garcia"},"q":{"type":"string","description":"Consulta de búsqueda","example":"sabes de matemáticas"},"tosearch":{"description":"Campos a buscar","example":["*"],"type":"array","items":{"type":"string"}},"max":{"type":"number","description":"Número máximo de resultados","example":20}},"required":["idConversacion","pushName","q","tosearch","max"]},"UpdateConfigParamDto":{"type":"object","properties":{"id":{"type":"string","description":"ID del documento","example":"1"},"limitMaxQueryTokens":{"type":"number","description":"Límite máximo de tokens de consulta","example":100},"limitMaxCaracters":{"type":"number","description":"Límite máximo de caracteres","example":1000},"limitMinCaracters":{"type":"number","description":"Límite mínimo de caracteres","example":10},"limitTimeBetweenConversations":{"type":"number","description":"Límite de tiempo entre conversaciones","example":60},"limitMaxQuestionsPerDay":{"type":"number","description":"Límite máximo de preguntas por día","example":60}},"required":["id","limitMaxQueryTokens","limitMaxCaracters","limitMinCaracters","limitTimeBetweenConversations","limitMaxQuestionsPerDay"]},"UpdateGenetic":{"type":"object","properties":{"id":{"type":"string","description":"ID del documento","example":"1"},"contexto":{"description":"Array de contextos, puede ser uno o más","example":["contexto1","contexto2"],"type":"array","items":{"type":"string"}}},"required":["id","contexto"]},"updateConfigRestricciones":{"type":"object","properties":{"id":{"type":"string","description":"ID del documento","example":"1"},"contexto":{"description":"Array de contextos, puede ser uno o más","example":["contexto1","contexto2"],"type":"array","items":{"type":"string"}},"permitido":{"type":"boolean","description":"contextos permitidos","example":true}},"required":["id","contexto","permitido"]},"PreguntasYRespuestasDto":{"type":"object","properties":{"preguntas":{"type":"string","description":"Array de preguntas, puede ser uno o más","example":"contexto1"},"respuestas":{"type":"string","description":"Array de respuestas, puede ser uno o más","example":"contexto1"}},"required":["preguntas","respuestas"]},"updateConfigPreguntasYRespuestas":{"type":"object","properties":{"id":{"type":"string","description":"ID del documento","example":"1"},"preguntasYRespuestas":{"description":"Array de preguntas y respuestas","type":"array","items":{"$ref":"#/components/schemas/PreguntasYRespuestasDto"}}},"required":["id","preguntasYRespuestas"]},"DashboardMetricsDto":{"type":"object","properties":{"totalUsers":{"type":"number","description":"Número total de usuarios","example":100},"totalConversaciones":{"type":"number","description":"Número total de conversaciones","example":500}},"required":["totalUsers","totalConversaciones"]},"RecentActivityDto":{"type":"object","properties":{"user":{"type":"string","description":"Nombre del usuario","example":"John Doe"},"idConversacion":{"type":"string","description":"ID único de la conversación","example":"1234567890"},"timestamp":{"type":"number","description":"Marca de tiempo de la actividad reciente ","example":"01/4/2025 10:59 PM"}},"required":["user","idConversacion","timestamp"]},"DashboardResponseDto":{"type":"object","properties":{"metrics":{"description":"Métricas generales del dashboard","allOf":[{"$ref":"#/components/schemas/DashboardMetricsDto"}]},"recentActivity":{"description":"Actividad reciente del dashboard","type":"array","items":{"$ref":"#/components/schemas/RecentActivityDto"}}},"required":["metrics","recentActivity"]},"UsersDto":{"type":"object","properties":{"userName":{"type":"string","description":"Nombre de usuario","example":"john_doe"},"password":{"type":"string","description":"Contraseña del usuario","example":"password123"}},"required":["userName","password"]}}},"paths":{"/api/conversacion/chat":{"post":{"operationId":"getChat","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}}},"responses":{"201":{"description":""}},"tags":["backoffice-service"]}},"/api/conversacion/config-params":{"get":{"operationId":"getConfigParams","summary":"Obtener parámetros de configuración","description":"Este endpoint devuelve los parámetros de configuración desde Elasticsearch.","parameters":[],"responses":{"200":{"description":"Parámetros de configuración obtenidos exitosamente."},"500":{"description":"Error interno del servidor."}},"tags":["backoffice-service"]},"patch":{"operationId":"updateConfigParam","summary":"Actualizar parámetros de configuración","description":"Este endpoint permite actualizar todo el documento de configuración en Elasticsearch.","parameters":[],"requestBody":{"required":true,"description":"Datos para actualizar el documento de configuración","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateConfigParamDto"}}}},"responses":{"200":{"description":"Configuración actualizada exitosamente."},"400":{"description":"Error en la solicitud. Asegúrate de que los datos sean válidos."},"500":{"description":"Error interno del servidor."}},"tags":["backoffice-service"]}},"/api/conversacion/config-params/entrenamiento":{"get":{"operationId":"getConfigEntrenamiento","parameters":[],"responses":{"200":{"description":""}},"tags":["backoffice-service"]}},"/api/conversacion/config-params/entrenamiento/global":{"patch":{"operationId":"updateConfigContextoGlobal","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateGenetic"}}}},"responses":{"200":{"description":""}},"tags":["backoffice-service"]}},"/api/conversacion/config-params/entrenamiento/restricciones":{"patch":{"operationId":"updateConfigRestricciones","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/updateConfigRestricciones"}}}},"responses":{"200":{"description":""}},"tags":["backoffice-service"]}},"/api/conversacion/config-params/entrenamiento/preguntas-y-respuestas":{"patch":{"operationId":"updateConfigPreguntas","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/updateConfigPreguntasYRespuestas"}}}},"responses":{"200":{"description":""}},"tags":["backoffice-service"]}},"/api/dashboard/metrics":{"get":{"operationId":"getDashboardMetrics","summary":"Obtener métricas del dashboard","description":"Este endpoint devuelve las métricas generales y la actividad reciente del dashboard.","parameters":[],"responses":{"200":{"description":"Métricas obtenidas exitosamente.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DashboardResponseDto"}}}},"500":{"description":"Error interno del servidor."}},"tags":["backoffice-service"]}},"/api/dashboard/filtered":{"get":{"operationId":"getFilteredConversations","summary":"Obtener conversaciones filtradas por fecha","description":"Este endpoint devuelve las conversaciones filtradas por un rango de fechas.","parameters":[{"name":"startDate","required":true,"in":"query","description":"Fecha de inicio en formato DD-MM-YYYY","example":"01-04-2025","schema":{"type":"string"}},{"name":"endDate","required":true,"in":"query","description":"Fecha de fin en formato DD-MM-YYYY","example":"02-04-2025","schema":{"type":"string"}}],"responses":{"200":{"description":"Conversaciones filtradas obtenidas exitosamente."},"400":{"description":"Error en la solicitud. Asegúrate de que las fechas sean válidas."},"500":{"description":"Error interno del servidor."}},"tags":["backoffice-service"]}},"/api/dashboard/filtered/download":{"get":{"operationId":"downloadFilteredConversationsExcel","summary":"Descargar conversaciones filtradas en formato Excel","description":"Este endpoint genera y descarga un archivo Excel con las conversaciones filtradas por un rango de fechas.","parameters":[{"name":"startDate","required":true,"in":"query","description":"Fecha de inicio en formato DD-MM-YYYY","example":"01-04-2025","schema":{"type":"string"}},{"name":"endDate","required":true,"in":"query","description":"Fecha de fin en formato DD-MM-YYYY","example":"02-04-2025","schema":{"type":"string"}}],"responses":{"200":{"description":"Archivo Excel generado y descargado exitosamente."},"400":{"description":"Error en la solicitud. Asegúrate de que las fechas sean válidas."},"500":{"description":"Error interno del servidor."}},"tags":["backoffice-service"]}},"/api/auth/login":{"post":{"operationId":"login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UsersDto"}}}},"responses":{"201":{"description":""}}}}}}